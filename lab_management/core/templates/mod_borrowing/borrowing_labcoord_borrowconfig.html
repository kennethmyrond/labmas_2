{% extends 'temp_navbar.html' %}
{% block title %}Pre-Book Requests{% endblock %}

{% block content %}
  <style>
    .btncontainer {
      text-align: right;
    }
  </style>

  <div class="pagetitle">
    <h1>Borrowing</h1>
    <nav>
      <ol class="breadcrumb">
        <li class="breadcrumb-item active">Borrowing Configurations</li>
      </ol>
    </nav>
  </div><!-- End Page Title -->

  <section class="section">
    <div class="row">
      <div class="col-lg-12">

        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Configurations</h5>

            <!-- Dropdown to select item_type -->
            <form method="GET" id="configForm">
              <div class="row mb-3">
                <label for="walkin" class="col-sm-2 col-form-label">Allow Walk-Ins:</label>
                <div class="col-sm-10">
                  <input type="checkbox" id="walkin" name="walkin" value="1">
                </div>
              </div>

              <div class="row mb-3">
                <label for="prebook" class="col-sm-2 col-form-label">Allow Pre-Booking:</label>
                <div class="col-sm-10">
                  <input type="checkbox" id="prebook" name="prebook" value="1">
                </div>
                <div class="col-sm-10" style="margin-left:3%;">
                  <label for="leadtime" class="col-sm-2 col-form-label">Set Lead Time:</label>
                  <input type="time" id="leadtime" name="leadtime">
                </div>
              </div>

              <div class="row mb-3">
                <label for="shortterm" class="col-sm-2 col-form-label">Allow Short-Term Booking:</label>
                <div class="col-sm-10">
                  <input type="checkbox" id="shortterm" name="shortterm" value="1">
                </div>
              </div>

              <div class="row mb-3">
                <label for="longterm" class="col-sm-2 col-form-label">Allow Long-Term Booking:</label>
                <div class="col-sm-10">
                  <input type="checkbox" id="longterm" name="longterm" value="1">
                </div>
              </div>

              <div class="btncontainer">
                <button class="btn btn-primary" id="savebtn-item-type-config">Save</button>
              </div>
            </form>

          </div>
        </div>

      </div>
    </div>
  </section>

  <section class="section">
    <div class="row">
      <div class="col-lg-12">

        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Borrowing Mode</h5>

            <!-- Choose between configuration by Item or Item Type -->
            <form id="borrowingModeForm">
              <div class="form-group">
                <label>Select Borrowing Configuration Mode:</label><br>
                <input type="radio" id="itemMode" name="borrowMode" value="item" checked>
                <label for="itemMode">By Specific Item</label><br>
                <input type="radio" id="typeMode" name="borrowMode" value="type">
                <label for="typeMode">By Item Type</label><br>
              </div>
            </form>

          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- Section to configure borrowing based on specific items -->
  <section class="section item-config-section">
    <div class="row">
      <div class="col-lg-12">

        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Borrowable Items Configurations</h5>

            <!-- Table with stripped rows -->
            <table class="table datatable">
              <thead>
                <tr>
                  <th>Item Name</th>
                  <th>Make Borrowable?</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Ethanol</td>
                  <td><input type="checkbox" class="borrow-toggle" data-item-id="ethanol"></td>
                </tr>
                <tr>
                  <td>Beaker</td>
                  <td><input type="checkbox" class="borrow-toggle" data-item-id="beaker"></td>
                </tr>
                <tr>
                  <td>Ethanol2</td>
                  <td><input type="checkbox" class="borrow-toggle" data-item-id="ethanol2"></td>
                </tr>
              </tbody>
            </table>

            <div class="btncontainer">
              <button class="btn btn-primary" id="savebtn-item-config">Save</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <!-- Section to configure borrowing based on item types -->
  <section class="section type-config-section" style="display:none;">
    <div class="row">
      <div class="col-lg-12">

        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Borrowable Item Types Configurations</h5>

            <!-- Table with item types -->
            <table class="table datatable">
              <thead>
                <tr>
                  <th>Item Type</th>
                  <th>Make Borrowable?</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Chemicals</td>
                  <td><input type="checkbox" class="borrow-toggle-type" data-type-id="chemicals"></td>
                </tr>
                <tr>
                  <td>Glassware</td>
                  <td><input type="checkbox" class="borrow-toggle-type" data-type-id="glassware"></td>
                </tr>
                <tr>
                  <td>Electronics</td>
                  <td><input type="checkbox" class="borrow-toggle-type" data-type-id="electronics"></td>
                </tr>
              </tbody>
            </table>

            <div class="btncontainer">
              <button class="btn btn-primary" id="savebtn">Save</button>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <script>
    // JavaScript to toggle between Item and Item Type configuration modes
    document.getElementById('itemMode').addEventListener('change', function() {
      if (this.checked) {
        document.querySelector('.item-config-section').style.display = 'block';
        document.querySelector('.type-config-section').style.display = 'none';
      }
    });

    document.getElementById('typeMode').addEventListener('change', function() {
      if (this.checked) {
        document.querySelector('.item-config-section').style.display = 'none';
        document.querySelector('.type-config-section').style.display = 'block';
      }
    });
  </script>

{% endblock %}
