{% extends 'temp_navbar.html' %}
{% block title %}Reserve Laboratory{% endblock %}
{% block content %}

<style>
  #deletebtn {
        background: red;
        border: 0;
        padding: 10px 20px;
        color: #fff;
        transition: 0.4s;
        border-radius: 4px;
    }
    #deletebtn:hover {
        text-decoration: underline;
    }
</style>

<!-- labres_labcoord_config.html -->

<div class="pagetitle">
  <h1>Room & Time Configuration</h1>
  <nav>
    <ol class="breadcrumb">
      <li class="breadcrumb-item active">Room and Time Configurations</li>
    </ol>
  </nav>
</div>

<!-- Room Configuration Section -->
<section class="section">
  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Add Room</h5>
          <!-- Form for Adding New Room -->
          <form method="POST">
            {% csrf_token %}
            <div class="row mb-3">
              <label for="room_name" class="col-sm-2 col-form-label">Room Name:</label>
              <div class="col-sm-4">
                <input type="text" id="room_name" name="room_name" class="form-control" placeholder="Enter room name" required>
              </div>

              <label for="room_capacity" class="col-sm-2 col-form-label">Capacity:</label>
              <div class="col-sm-4">
                <input type="number" id="room_capacity" name="room_capacity" class="form-control" placeholder="Enter room capacity" required>
              </div>
            </div>

            <div class="row mb-3">
              <label for="room_description" class="col-sm-2 col-form-label">Description:</label>
              <div class="col-sm-10">
                <input type="text" id="room_description" name="room_description" class="form-control" placeholder="Enter room description" maxlength="100">
              </div>
            </div>

            <button type="submit" name="add_room" class="btn btn-primary">Add Room</button>
          </form>

          <hr>

          <h5 class="card-title">Manage Rooms</h5>
          <!-- Room Table for Editing and Deleting Rooms -->
          <form method="POST">
            {% csrf_token %}
            <div class="table-responsive">
              <table class="table datatable">
                <thead>
                  <tr>
                    <th>Room Name</th>
                    <th>Capacity</th>
                    <th>Description</th>
                    <th>Enable for Reservation</th>
                    <th>Delete</th>
                  </tr>
                </thead>
                <tbody>
                  {% for room in rooms %}
                  <tr>
                    <td>{{ room.name }}</td>
                    <td>{{ room.capacity }}</td>
                    <td>{{ room.description }}</td>
                    <td><input type="checkbox" name="room_{{ room.room_id }}_enabled" {% if room.is_reservable %}checked{% endif %}></td>
                    <td>
                      <button type="submit" name="delete_room" value="{{ room.room_id }}" class="btn btn-danger">Delete</button>
                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>

            <button type="submit" name="save_rooms" class="btn btn-primary">Save Room Configuration</button>
            <button type="submit" name="cancel" class="btn btn-secondary">Cancel</button>
          </form>

          <!-- Confirmation Modal for Save -->
          <div id="confirmRoomModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Confirm Room Configuration</h5>
                </div>
                <div class="modal-body">
                  Are you sure you want to save these changes?
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                  <button type="button" class="btn btn-primary">Confirm</button>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>

<!-- Time Configuration Section -->
<section class="section">
  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Time Slot Configuration</h5>

          <form method="POST">
            {% csrf_token %}

            <!-- Select Global or Room-Specific -->
            <div class="form-group row mb-3">
              
              <div class="col-sm-4">
                <input type="checkbox" id="global_config" name="global_config" checked>
                <label for="global_config" class="col-sm-10 col-form-label">Apply to All Rooms</label>
              </div>

              <label for="roomSelect" class="col-sm-3 col-form-label">Select Room (if not global):</label>
              <div class="col-sm-4">
                <select id="roomSelect" name="room_id" class="form-control">
                  {% for room in rooms %}
                  <option value="{{ room.room_id }}">{{ room.name }}</option>
                  {% endfor %}
                </select>
              </div>
            </div>

            <!-- Time Configuration Type -->
            <div class="form-group row mb-3">
              <label class="col-sm-10 col-form-label">Reservation Type:</label>
              <div class="col-sm-4">
              <input type="radio" name="reservation_type" value="class" checked> Class Time
              </div>
              <div class="col-sm-4">
              <input type="radio" name="reservation_type" value="hourly"> Hourly
              </div>
            </div>

            <!-- Hourly Time Input -->
            <div class="row mb-3">
              <label for="hourly_start_time" class="col-sm-2 col-form-label">Start Time:</label>
              <div class="col-sm-4">
                <input type="time" id="hourly_start_time" name="hourly_start_time" class="form-control" step="3600000">
              </div>

              <label for="hourly_end_time" class="col-sm-2 col-form-label">End Time:</label>
              <div class="col-sm-4">
                <input type="time" id="hourly_end_time" name="hourly_end_time" class="form-control" step="3600000">  
              </div>
            </div>

            <!-- Block Time Configuration Table -->
            <br>
            <div class="table-responsive">
              <label for="table">Select time of unavailability</label>
              <table class="table table-bordered table-striped">
                <thead>
                  <tr>
                    <th>Time</th>
                    <th>Monday</th>
                    <th>Tuesday</th>
                    <th>Wednesday</th>
                    <th>Thursday</th>
                    <th>Friday</th>
                    <th>Saturday</th>
                    <th>Sunday</th>
                  </tr>
                </thead>
                <tbody>
                  {% for time_slot in time_slots %}
                  <tr>
                    <td>{{ time_slot }}</td>
                    <td><input type="checkbox" name="Monday_time_slots" value="{{ time_slot }}"></td>
                    <td><input type="checkbox" name="Tuesday_time_slots" value="{{ time_slot }}"></td>
                    <td><input type="checkbox" name="Wednesday_time_slots" value="{{ time_slot }}"></td>
                    <td><input type="checkbox" name="Thursday_time_slots" value="{{ time_slot }}"></td>
                    <td><input type="checkbox" name="Friday_time_slots" value="{{ time_slot }}"></td>
                    <td><input type="checkbox" name="Saturday_time_slots" value="{{ time_slot }}"></td>
                    <td><input type="checkbox" name="Sunday_time_slots" value="{{ time_slot }}"></td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>

            <button type="submit" name="save_time" class="btn btn-primary">Save Time Configuration</button>
            <button type="submit" name="cancel" class="btn btn-secondary">Cancel</button>
          </form>

          <!-- Confirmation Modal for Save -->
          <div id="confirmTimeModal" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">Confirm Time Configuration</h5>
                </div>
                <div class="modal-body">
                  Are you sure you want to save these changes?
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                  <button type="button" class="btn btn-primary">Confirm</button>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</section>


{% endblock %}
